---
author: Nonclercq Basile
title: How protect your application with middleware ?
---

# Setup

1. Install Docker
2. Run docker pull bkimminich/juice-shop
3. Run docker run --rm -p 3000:3000 bkimminich/juice-shop
4. Browse to http://localhost:3000


#/score-board

Juice Shop Link: https://hub.docker.com/r/bkimminich/juice-shop

Schema for the next: 

* Vulnerability

    * Demonstration 
    * Fix

# SQL injection 

## Vulnerability Exploitation

![SQLi](./images/sqliVuln1.png)

![SQLi](./images/sqliVuln2.png)

<!-- ![SQLi](./images/sqliVuln3.png) -->

## Fix

> ```Need: WAF```

Choice: ModSecurity 

Works for Apache and Nginx

Prevent:

* SQL Injection
* Insuring the content type matches the body data.
* Protection against malformed POST requests.
* HTTP Protocol Protection
* Real-time Blacklist Lookups
* HTTP Denial of Service Protections
* Generic Web Attack Protection
* Error Detection and Hiding

Result: 



Repository : https://hub.docker.com/r/owasp/modsecurity-crs/

# XSS 

## Vulnerability 


Payload: 
```bash
<iframe src="javascript:alert(`Nice XSS`)">
```

![XSS](./images/XSSVuln1.png)

![XSS](./images/XSSVuln2.png)


## Fix


# Broken authentification

Even if we could, from admin account, 
